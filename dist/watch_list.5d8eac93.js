var imported=document.createElement("script");imported.src="./assets/js/pako_inflate.js",document.head.appendChild(imported);let triggers={connect:[],tick:[]};var conn=null;function websocket(e,n,t,r){var o=n,i=e,s=new WebSocket("wss://wsfeeds.angelbroking.com/NestHtml5Mobile/socket/stream");this.connection=function(){return new Promise(((e,n)=>{if(null===i||null===o)return"client_code or feed_token is missing";s.onopen=function(e){var n='{"task":"cn","channel":"","token":"'+o+'","user":"'+i+'","acctid":"'+i+'"}';trigger("connect",[s.send(n)]),setInterval((function(){var e='{"task":"hb","channel":"","token":"'+o+'","user": "'+i+'","acctid":"'+i+'"}';s.send(e)}),1e4)},s.onmessage=function(e){var n=atob(e.data).split("").map((function(e){return e.charCodeAt(0)})),t=new Uint8Array(n);trigger("tick",[_atos(pako.inflate(t))])},s.onerror=function(e){console.log("error::",e)},s.onclose=function(e){console.log("Socket closed"),trigger("tick",["Socket Closed"])}}))},this.runScript=function(e,n){if(null===n)return"task is missing";if("mw"!==n&&"sfi"!==n&&"dp"!==n)return"Invalid task provided";var t='{"task":"'+n+'","channel":"'+e+'","token":"'+o+'","user": "'+i+'","acctid":"'+i+'"}';s.send(t)},this.on=function(e,n){triggers.hasOwnProperty(e)&&triggers[e].push(n)},this.close=function(){s.close()}}function _atos(e){var n=[];try{for(var t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]))}catch(e){}return n.join("")}function trigger(e,n){if(triggers[e])for(var t=0;t<triggers[e].length;t++)triggers[e][t].apply(triggers[e][t],n||[])}
//# sourceMappingURL=watch_list.5d8eac93.js.map
